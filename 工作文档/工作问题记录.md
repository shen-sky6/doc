
### 1.情感倾向字段类型对不上，目前我默认只取第一个
```java
@Schema(description = "情感倾向，多选，1正面，-1负面，0中性")  
private List<Integer> sentiment;

/**  
 * 是否必须：否  
 * 正负面  
 * -100 或 空：全部  
 * 0：中性  
 * 1：正面  
 * -1：负面  
 */  
private Integer filter_negative;
```
### 2.道丁参数`matchFields`问题：
不支持`作者名、作者id`，
没有`视频帧识别`目前暂用`ocr,retweeted.ocr`代替
文档对`istar_asr`无解释，目前暂用于`音频识别`
```java
case 4: // 音频识别  
    fields.add("istar_asr");
```
`matchFields`完整版转换逻辑:
```java
private String convertMatchModeToFields(List<Integer> matchModes) {  
    List<String> fields = new ArrayList<>();  
    for (Integer mode : matchModes) {  
        switch (mode) {  
            case 1: // 标题+正文  
                fields.addAll(Arrays.asList("title", "content"));  
                break;            case 2: // 标题  
                fields.add("title");  
                break;            case 3: // 正文  
                fields.add("content");  
                break;            case 4: // 音频识别  
                fields.add("istar_asr");  
                break;            case 5: // 封面图识别  
                fields.add("ocr,retweeted.ocr");  
                break;            case 6: // 作者名  
                //fields.add("user.name");  
                break;  
            case 7: // 账号ID  
                //fields.add("user.uid");                break;  
            case 8: // 视频帧识别  
                fields.add("ocr,retweeted.ocr");  
                break;            case 9: // 发布地  
                fields.add("place,content_location");  
                break;        }  
    }  
    return fields.stream().distinct().collect(Collectors.joining(","));  
}
```

### 3.没有对应字段
```java

data_type //数据来源
filter_channel //定向频道
filter_source_id  //定向发帖人ID (这个字段不知是否可以用我们系统的modes=7账号ID)
filter_repost_source  //文章来源、转载来源
userIpRegion  //用户IP属地
userLocation  //用户注册地
filter_area  //地域标签

```

### 4.道丁接口同一个subjectId请求失败后依然保存了他们数据库(没回滚)，第二次用相同的subjectId请求会报唯一错误
```text
Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '51d211678ab74c5388fb2a2030bc03fe' for key 'uk_original_subject_id'\n### The error may exist in com/datatell/dayu/xdata/module/subscribe/mapper/SubscribeTaskMapper.java (best guess)\n### The error may involve com.datatell.dayu.xdata.module.subscribe.mapper.SubscribeTaskMapper.insert-Inline\n### The error occurred while setting parameters\n### SQL: INSERT INTO t_xdata_subscribe_task  ( original_subject_id,  subject_name, status, keyword_logic, exclude_keyword, match_modes, sentiments, site_type_all, item_types, domains, author_names, exclude_domains, exclude_authors, date_from, date_to, intelligent_filter, site_type_mode, noise_state,    create_by, create_time,  update_time )  VALUES  ( ?,  ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?,    ?, ?,  ? )\n### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '51d211678ab74c5388fb2a2030bc03fe' for key 'uk_original_subject_id'\n; Duplicate entry '51d211678ab74c5388fb2a2030bc03fe' for key 'uk_original_subject_id'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '51d211678ab74c5388fb2a2030bc03fe' for key 'uk_original_subject_id'",
```


```json
{"data":{"list":[{"filter_channel":[],"subject":"上市公司专题","plugins":[],"user_logic":"((明源云 OR 长城证券 OR 岭南控股 OR 绿联科技 OR 广百股份 OR 杰创智能 OR 白云山 OR 倍轻松 OR 深物业A OR 天亿马 OR 平安银行 OR 视源股份 OR 广东甘化 OR 南方传媒 OR 奥海科技 OR 英威腾 OR 德尔玛 OR 雷士照明 OR 中望软件 OR 深信服 OR 元征科技 OR 混沌天成 OR 财富趋势 OR 爱施德 OR 鹏鼎控股 OR 鸿合科技 OR 神州数码 OR 迈普医学 OR 招商证券 OR 周大生 OR 格力地产 OR 海能达 OR 保利发展 OR 南方航空 OR 第一创业 OR 花样年控股集团有限公司 OR 天波信息 OR 海鸥住工 OR 高澜股份 OR 宏商材料 OR 世荣兆业 OR 浩云科技 OR 雷曼光电 OR 明阳电路 OR 昊志机电 OR 汇创达 OR 超声电子 OR 惠云钛业 OR 澄天伟业 OR 宏景科技 OR 鸿富瀚 OR 东信和平 OR 卫光生物 OR 可立克 OR 博济医药 OR 顶固集创 OR 毅昌科技 OR 美联新材 OR 福能东方 OR 宜通世纪 OR 科瑞技术 OR 哈森股份 OR 长盈精密 OR 彩讯股份 OR 祥鑫科技 OR 国光电器 OR 铂科新材 OR 矩阵股份 OR 融捷股份 OR 鼎泰高科 OR 鸿利智汇 OR 莱宝高科 OR 中山公用 OR 华研精机 OR 群兴玩具 OR 银宝山新 OR 科翔股份 OR 万润科技 OR 同洲电子 OR 怡合达 OR 杰美特 OR 豪美新材 OR 安车检测 OR 派生科技 OR 康方生物 OR 宝莱特 OR 中天精装 OR 南兴股份 OR 胜蓝股份 OR 日丰股份 OR 贤丰控股 OR 沃尔核材 OR 民爆光电 OR 华侨城A OR 丝路视觉 OR 易天股份 OR 粤传媒 OR 华利集团 OR 有方科技 OR 朗科智能 OR 奥飞娱乐 OR 新国都 OR 兆新股份 OR 特发信息 OR 粤高速A OR 银之杰 OR 航新科技 OR 星辉娱乐 OR 众生药业 OR 御银股份 OR 先健科技 OR 捷荣技术 OR 海伦司 OR 光启技术 OR 宝新能源 OR 国星光电 OR 尚荣医疗 OR 睿智医药 OR 卓翼科技 OR 优博讯 OR 联建光电 OR 致尚科技 OR 弘亚数控 OR 纬德信息 OR 金百泽 OR 欣天科技 OR 润贝航科 OR 美格智能 OR 格力电器 OR 天承科技 OR 澳至尊) AND (控制权 OR 利益输送 OR 财务造假 OR 财务违规 OR 挪用资金 OR 信披违规 OR 操纵市场 OR 内幕交易 OR 资产重组 OR 关联交易 OR 挪用资金 OR 投资失败 OR 违反法律 OR 违规经营 OR 行贿 OR 造假 OR 暴雷 OR 垄断 OR 环境污染 OR 环保违规 OR 安全事故 OR 召回 OR 商誉 OR 巨亏 OR 环境污染 OR 环保违规 OR 血汗工厂 OR 滥用职权 OR 质押 OR 性骚扰 OR 丑闻 OR 包养 OR 小三 OR 婚外情 OR 出轨)) AND NOT ((伊戈尔 OR 洲明科技))","match_fields":"title,content","filter_repost_source":[],"Tags2":"","Tags1":"","filter_domain":[],"Tags3":"","filter_source":["##可爱的广告君"],"filter_area":"","id":4107171844960003,"approvee":"0,1","filter_media":["04","11","06","01","02","09"],"result_url":"user_subject_3653587085460002","amb_w":[],"extraParam":"{\"KK_area_user.ip_region\":0,\"KK_area_user.location\":0}","filters":"{}","data_type":["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","60"],"filter_negative":["1"],"filter_source_id":[],"filter_wtype":["1","2","7"],"username":"在线文档","status":"开启"}]},"code":0,"msg":"OK"}
```


curl -X POST "https://dowding.istarshine.com/api/v1/subject/ks/stop" \
-H "Content-Type: application/x-www-form-urlencoded; charset=utf-8" \
-d "token=91f5e33d-efdc-4bf5-ab0a-5fb2f4d2c370&id=4112566326700004"




curl -X POST "https://dowding.istarshine.com/api/v1/subject/ks/start?token=91f5e33d-efdc-4bf5-ab0a-5fb2f4d2c370" \
  -H "Content-Type: application/x-www-form-urlencoded; charset=utf-8" \
  -d "id=4112323889460004"