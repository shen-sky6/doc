###### é—®ï¼šå¤–éƒ¨åº”ç”¨å¦‚ä½•è°ƒç”¨

###### ChatGPT è¯´ï¼š

éå¸¸å¥½çš„é—®é¢˜ âœ…  
ä½ å·²ç»ç†è§£äº† Spring AI å†…éƒ¨æ€ä¹ˆè°ƒç”¨ MCP å·¥å…·ï¼Œ  
ç°åœ¨æˆ‘ä»¬æ¥è®² **å¤–éƒ¨åº”ç”¨ï¼ˆæ¯”å¦‚åˆ«çš„ç³»ç»Ÿã€å¾®æœåŠ¡ã€å‰ç«¯ï¼‰è¦æ€ä¹ˆè°ƒç”¨ MCP å·¥å…·**ã€‚

è¿™ä¸ªè¦åˆ†ä¸¤ç§æƒ…å†µæ¥çœ‹ğŸ‘‡

---

## ğŸ§± ä¸€ã€å¦‚æœä½ çš„åº”ç”¨æ˜¯ **Spring AI + MCP å®¢æˆ·ç«¯**

è¿™æ˜¯æœ€å¸¸è§ã€ä¹Ÿæ˜¯æœ€æ¨èçš„æ–¹å¼ã€‚  
å¤–éƒ¨ç³»ç»Ÿï¼ˆæˆ–ä½ è‡ªå·±çš„æœåŠ¡ï¼‰é€šè¿‡ Spring AI SDK è°ƒç”¨ MCP Server æš´éœ²çš„å·¥å…·ã€‚

### âœ… å…¸å‹è°ƒç”¨æµç¨‹å¦‚ä¸‹ï¼š

`å¤–éƒ¨åº”ç”¨ï¼ˆè°ƒç”¨æ–¹ï¼‰        â”‚        â–¼ Spring AI / Java SDK        â”‚        â–¼ MCP Helperï¼ˆSyncMcpToolCallbackï¼‰        â”‚        â–¼ MCP Serverï¼ˆçœŸæ­£æ‰§è¡Œå·¥å…·é€»è¾‘ï¼‰`

---

### ğŸ’¡ ç¤ºä¾‹ä»£ç ï¼š

å‡è®¾å¤–éƒ¨åº”ç”¨æƒ³è°ƒç”¨ä¸€ä¸ª MCP å·¥å…·ï¼š`get_social_media_data`ï¼Œ  
MCP Server æä¾›æ¥å£åœ¨ `http://mcp-server:8080`ã€‚

ä½ å¯ä»¥è¿™æ ·å†™ï¼ˆJava / Spring é¡¹ç›®ä¸­ï¼‰ï¼š

```java
import org.springframework.ai.mcp.client.McpSyncClient;
import org.springframework.ai.tool.Tool;
import org.springframework.ai.tool.ToolCallback;
import org.springframework.ai.mcp.tool.SyncMcpToolCallback;

public class McpClientExample {

    public static void main(String[] args) {
        // 1ï¸âƒ£ åˆ›å»º MCP å®¢æˆ·ç«¯
        McpSyncClient client = new McpSyncClient("http://mcp-server:8080");

        // 2ï¸âƒ£ æŒ‡å®šè¦è°ƒç”¨çš„ MCP å·¥å…·
        Tool mcpTool = new Tool("get_social_media_data");

        // 3ï¸âƒ£ åˆ›å»ºå·¥å…·å›è°ƒï¼ˆç»‘å®š MCP å®¢æˆ·ç«¯ + å·¥å…·åï¼‰
        ToolCallback callback = new SyncMcpToolCallback(client, mcpTool);

        // 4ï¸âƒ£ ä¼ å…¥ JSON å‚æ•°å¹¶è°ƒç”¨å·¥å…·
        String result = callback.call("{\"keyword\": \"AI\"}");

        // 5ï¸âƒ£ æ‰“å°è¿”å›ç»“æœ
        System.out.println(result);
    }
}

```

> âœ… å¤–éƒ¨ç³»ç»Ÿåªéœ€æä¾› MCP åœ°å€ + å·¥å…·å + å‚æ•°  
> Spring AI MCP å®¢æˆ·ç«¯è‡ªåŠ¨å‘èµ· JSON-RPC è°ƒç”¨ â†’ æ¥æ”¶ç»“æœã€‚

---

## ğŸ” äºŒã€å¦‚æœä½ çš„å¤–éƒ¨åº”ç”¨**ä¸æ˜¯ Java / Spring é¡¹ç›®**

MCP çš„åº•å±‚åè®®æ˜¯ **JSON-RPC 2.0 + HTTP / SSE / WebSocket**ã€‚  
æ‰€ä»¥ä½ å¯ä»¥**ç›´æ¥é€šè¿‡ HTTP æˆ– WebSocket è°ƒç”¨** MCP æœåŠ¡ã€‚

---

### ğŸ’¬ HTTP è°ƒç”¨ç¤ºä¾‹ï¼š

MCP Server ä¸€èˆ¬ä¼šæš´éœ²ä¸€ä¸ªæ¥å£ï¼Œæ¯”å¦‚ï¼š

```pgsql
POST http://mcp-server:8080/tools/call
Content-Type: application/json

```

è¯·æ±‚ä½“ï¼š

```json
{   "name": "get_social_media_data",   "arguments": {     "keyword": "AI"   } }
```

å“åº”ï¼š

```json
{   "result": {     "data": [       { "source": "Twitter", "content": "AI is trending" },       { "source": "Reddit", "content": "AI tools are powerful" }     ]   } }
```

> ğŸ”¸ è¿™å°±æ˜¯ MCP çš„å·¥å…·è°ƒç”¨æ ¸å¿ƒè¿‡ç¨‹ï¼ˆåº•å±‚ç”¨ JSON-RPC å°è£…ï¼‰ã€‚  
> ä½ å¯ä»¥ç”¨ï¼š
> 
> - Java çš„ `HttpClient`
>     
> - Python çš„ `requests`
>     
> - JavaScript çš„ `fetch()`
>     
> - æˆ–ä»»ä½• REST å·¥å…·ï¼ˆPostman, curlï¼‰
>     

---

### ğŸ’¡ ç¤ºä¾‹ï¼šç”¨ curl è°ƒç”¨ MCP å·¥å…·

`curl -X POST http://mcp-server:8080/tools/call \   -H "Content-Type: application/json" \   -d '{     "name": "get_social_media_data",     "arguments": { "keyword": "AI" }   }'`

å“åº”ï¼š

`{   "result": {     "data": [       { "source": "Twitter", "content": "AI is trending" }     ]   } }`

---

## ğŸ§  ä¸‰ã€å¦‚æœä½ çš„å¤–éƒ¨åº”ç”¨æƒ³â€œæš´éœ²â€å·¥å…·ç»™åˆ«äººè°ƒç”¨

MCP ä¹Ÿæ”¯æŒåå‘æ“ä½œ â€”â€” ä½ çš„ç³»ç»Ÿå¯ä»¥å½“ä½œ **MCP Server**ï¼Œ  
è®©åˆ«çš„ Spring AI åº”ç”¨é€šè¿‡ MCP Helpers æ¥è°ƒç”¨ä½ çš„æ¥å£ã€‚

è¿™ç§åœºæ™¯ä¸‹ä½ è¦ï¼š

1. å®ç° MCP Serverï¼›
    
2. æ³¨å†Œå·¥å…·ï¼›
    
3. åœ¨ `tool.list` å’Œ `tool.call` è¯·æ±‚ä¸­å¤„ç†é€»è¾‘ã€‚
    

ç¤ºä¾‹ï¼ˆä¼ªä»£ç ï¼‰ï¼š

`@RestController @RequestMapping("/tools") public class McpServerController {      @PostMapping("/list")     public List<ToolSpecification> listTools() {         return List.of(new ToolSpecification("get_social_media_data", "è·å–ç¤¾åª’æ•°æ®"));     }      @PostMapping("/call")     public Map<String, Object> callTool(@RequestBody McpToolRequest request) {         if ("get_social_media_data".equals(request.getName())) {             return Map.of("result", List.of(Map.of("source", "Twitter", "content", "AI çƒ­ç‚¹")));         }         throw new IllegalArgumentException("Unknown tool: " + request.getName());     } }`

è¿™æ ·å…¶ä»– Spring AI å®¢æˆ·ç«¯å°±å¯ä»¥ç”¨ MCP Helper è°ƒç”¨ä½ çš„æœåŠ¡äº†ã€‚

---

## âœ… æ€»ç»“ï¼šå¤–éƒ¨åº”ç”¨è°ƒç”¨ MCP å·¥å…·çš„ 3 ç§æ–¹å¼

|è°ƒç”¨æ–¹å¼|é€‚ç”¨åœºæ™¯|è°ƒç”¨æ–¹å¼|è¯´æ˜|
|---|---|---|---|
|ğŸŸ© **Spring AI MCP å®¢æˆ·ç«¯**|Java / Spring é¡¹ç›®|`SyncMcpToolCallback` / `AsyncMcpToolCallback`|æœ€ç®€å•ã€æ¨èæ–¹å¼|
|ğŸŸ¦ **HTTP / WebSocket è°ƒç”¨**|ä»»ä½•è¯­è¨€|JSON-RPC è¯·æ±‚|çµæ´»ä½†éœ€è¦è‡ªå·±å°è£…åè®®|
|ğŸŸ¨ **æš´éœ² MCP Server**|ä½ å¸Œæœ›æä¾›å·¥å…·ç»™åˆ«äººç”¨|å®ç° `/tools/list` å’Œ `/tools/call`|ä¾›å¤–éƒ¨ç³»ç»Ÿè°ƒç”¨|